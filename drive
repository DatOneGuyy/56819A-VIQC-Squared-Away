#pragma config(Sensor, port5,  gyro,           sensorVexIQ_Gyro)
#pragma config(Motor,  motor2,          armright,      tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor3,          rightdrive,    tmotorVexIQ, PIDControl, driveRight, encoder)
#pragma config(Motor,  motor4,          strafe,        tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor8,          armleft,       tmotorVexIQ, PIDControl, reversed, driveLeft, encoder)
#pragma config(Motor,  motor9,          leftdrive,     tmotorVexIQ, PIDControl, reversed, encoder)
#pragma config(Motor,  motor10,         claw,          tmotorVexIQ, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

float e = 2.71828459045;

void setup() {
	resetMotorEncoder(armright);
	resetMotorEncoder(armleft);
	resetMotorEncoder(strafe);
	resetMotorEncoder(rightdrive);
	resetMotorEncoder(leftdrive);
	resetMotorEncoder(claw);
	setGyroSensitivity(gyro, gyroNormalSensitivity);
	resetGyro(gyro);
}

int map(int value) {
	int output;
	if (value > 0) {
		output = ((120 / (1 + 0.05 * pow(e, -0.072 * (value - 90))) - 3.572) / 1.13576986016);
	} else if (value < 0) {
		output = -((120 / (1 + 0.05 * pow(e, -0.072 * (abs(value) - 90))) - 3.572) / 1.13576986016);
	} else {
		output = 0;
	}
	return output;
}

task main() {
	setup();
	while (true) {
		setMotorSpeed(leftdrive, map(getJoystickValue(ChA)));
		setMotorSpeed(rightdrive, map(getJoystickValue(ChD)));
		setMotorSpeed(strafe, 0.5 * getJoystickValue(ChB) + 0.5 * getJoystickValue(ChC));
		if (getJoystickValue(BtnFUp) == 1) {
			setup();
		}
		if (getJoystickValue(BtnLUp) == 1 && getJoystickValue(BtnLDown) == 0) {
			setMotorSpeed(armleft, 100);
			setMotorSpeed(armright, 100);
		} else if (getJoystickValue(BtnLDown) == 1 && getJoystickValue(BtnLUp) == 0) {
			setMotorSpeed(armleft, -100);
			setMotorSpeed(armright, -100);
		} else {
			setMotorSpeed(armleft, 0);
			setMotorSpeed(armright, 0);
		}

		if (getJoystickValue(BtnRUp) == 1 && getJoystickValue(BtnRDown) == 0) {
			setMotorSpeed(claw, 100);
		} else if (getJoystickValue(BtnRDown) == 1 && getJoystickValue(BtnRUp) == 0) {
			setMotorSpeed(claw, -100);
		} else {
			setMotorSpeed(claw, 0);
		}
	}
}
